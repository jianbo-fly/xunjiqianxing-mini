# 后台管理系统 Web 前端开发清单

> 版本：V1.1
> 更新日期：2026-01-26

---

## 一、技术选型

| 项 | 推荐方案 | 说明 |
|-----|---------|------|
| 框架 | Vue 3 + TypeScript | 主流方案，生态完善 |
| UI组件库 | Element Plus | 适合后台管理系统 |
| 状态管理 | Pinia | Vue 3 官方推荐 |
| 路由 | Vue Router 4 | - |
| HTTP | Axios | 请求封装 |
| 图表 | ECharts | 数据可视化 |
| 构建工具 | Vite | 快速开发体验 |
| 代码规范 | ESLint + Prettier | 代码质量 |

---

## 二、项目结构

```
xj-admin-web/
├── index.html                   # HTML入口 ✅
├── vite.config.ts               # Vite配置 ✅
├── tsconfig.json                # TS配置 ✅
├── tsconfig.app.json            # TS应用配置 ✅
├── .env.development             # 开发环境配置 ✅
├── .env.production              # 生产环境配置 ✅
├── package.json                 # 依赖配置 ✅
│
├── src/
│   ├── main.ts                  # 应用入口 ✅
│   ├── App.vue                  # 根组件 ✅
│   │
│   ├── api/                     # API接口
│   │   ├── auth.ts              # ✅ 认证API
│   │   ├── route.ts             # 线路API
│   │   ├── order.ts             # 订单API
│   │   ├── user.ts              # 用户API
│   │   ├── promoter.ts          # 推广员API
│   │   ├── coupon.ts            # 优惠券API
│   │   ├── banner.ts            # Banner API
│   │   ├── category.ts          # 分类API
│   │   ├── supplier.ts          # 供应商API
│   │   └── config.ts            # 配置API
│   │
│   ├── assets/                  # 静态资源
│   │   └── logo.svg             # ✅ Logo图标
│   │
│   ├── components/              # 公共组件
│   │   ├── Layout/              # ✅ 布局组件
│   │   │   ├── index.vue        # ✅ 主布局
│   │   │   ├── Sidebar.vue      # ✅ 侧边栏
│   │   │   ├── Navbar.vue       # ✅ 导航栏
│   │   │   └── Breadcrumb.vue   # ✅ 面包屑
│   │   ├── Table/               # 表格封装
│   │   ├── Form/                # 表单封装
│   │   ├── Upload/              # 上传组件
│   │   └── Charts/              # 图表组件
│   │
│   ├── composables/             # 组合式函数
│   │
│   ├── router/                  # 路由配置
│   │   ├── index.ts             # ✅ 路由定义
│   │   └── types.ts             # ✅ 路由类型扩展
│   │
│   ├── stores/                  # Pinia状态
│   │   ├── index.ts             # ✅ Store入口
│   │   ├── user.ts              # ✅ 用户状态
│   │   └── app.ts               # ✅ 应用状态
│   │
│   ├── styles/                  # 全局样式
│   │   └── index.scss           # ✅ 全局样式
│   │
│   ├── types/                   # 类型定义
│   │   └── index.ts             # ✅ 通用类型
│   │
│   ├── utils/                   # 工具函数
│   │   ├── request.ts           # ✅ 请求封装
│   │   ├── auth.ts              # ✅ 认证工具
│   │   └── format.ts            # 格式化工具
│   │
│   └── views/                   # 页面视图
│       ├── login/
│       │   └── index.vue        # ✅ 登录页
│       ├── dashboard/
│       │   └── index.vue        # ✅ 数据看板
│       ├── error/
│       │   └── 404.vue          # ✅ 404页面
│       ├── route/               # 线路管理
│       │   ├── list.vue         # ✅ 线路列表
│       │   ├── form.vue         # ✅ 新建/编辑线路
│       │   └── audit.vue        # ✅ 线路审核
│       ├── order/               # 订单管理
│       │   ├── list.vue         # ✅ 订单列表
│       │   ├── detail.vue       # ✅ 订单详情
│       │   └── refund.vue       # ✅ 退款管理
│       ├── user/                # 用户管理
│       │   ├── list.vue         # ✅ 用户列表
│       │   └── member.vue       # ✅ 会员管理
│       ├── leader/              # 领队管理
│       ├── promoter/            # 推广员管理
│       ├── coupon/              # 优惠券管理
│       ├── content/             # 内容管理
│       ├── system/              # 系统管理
│       │   ├── supplier.vue     # ✅ 供应商管理
│       │   ├── banner.vue       # ✅ Banner管理
│       │   └── category.vue     # ✅ 分类管理
│       └── custom/              # 定制游管理
```

**图例说明：** ✅ 表示已完成

---

## 三、模块清单

### 3.1 基础模块

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 登录页 | `/login` | 账号密码登录 | `POST /admin/auth/login` | P0 |
| 修改密码 | `/profile/password` | 修改当前账号密码 | `POST /admin/auth/changePassword` | P1 |
| 个人信息 | `/profile` | 查看当前用户信息 | `GET /admin/auth/userinfo` | P1 |

**布局组件：**
- 侧边栏菜单（可折叠）
- 顶部导航栏（用户信息、退出登录）
- 面包屑导航
- 标签页导航（可选）

---

### 3.2 数据看板

| 页面 | 路由 | 功能 | 优先级 |
|------|------|------|--------|
| 首页看板 | `/dashboard` | 核心数据概览 | P0 |

**看板内容：**
```
┌─────────────────────────────────────────────────────────┐
│  今日订单: 12    今日销售额: ¥28,800    新增用户: 45     │
│  待确认订单: 5   待审核退款: 2          待处理定制: 3    │
├─────────────────────────────────────────────────────────┤
│  [销售趋势图 - 近7天/30天]                               │
├───────────────────────┬─────────────────────────────────┤
│  [订单状态分布饼图]    │  [线路销量TOP10]                 │
├───────────────────────┴─────────────────────────────────┤
│  [待办事项列表]                                          │
└─────────────────────────────────────────────────────────┘
```

---

### 3.3 线路管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 线路列表 | `/route/list` | 分页、筛选、上下架、删除 | `GET /admin/route/list` | P0 |
| 新建线路 | `/route/create` | 创建线路表单 | `POST /admin/route` | P0 |
| 编辑线路 | `/route/edit/:id` | 编辑线路信息 | `PUT /admin/route` | P0 |
| 线路详情 | `/route/detail/:id` | 查看线路详情 | `GET /admin/route/{id}` | P0 |
| 套餐管理 | `/route/:id/packages` | 套餐CRUD | `GET /admin/route/{id}/packages` | P0 |
| 价格日历 | `/route/package/:id/calendar` | 日历方式设置价格 | `POST /admin/route/package/prices` | P1 |
| 线路审核 | `/route/audit` | 审核待审核线路 | `POST /admin/route/audit` | P1 |

**线路列表筛选项：**
- 线路名称（关键词搜索）
- 分类
- 状态（全部/上架/下架/待审核）
- 供应商（管理员可见）
- 创建时间范围

**线路表单字段：**
- 基本信息：名称、副标题、分类、标签
- 图片：封面图、详情图（多图）
- 行程：行程天数、行程安排（富文本）
- 费用：费用说明、预订须知（富文本）
- 其他：出发城市、目的地、亮点

---

### 3.4 订单管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 订单列表 | `/order/list` | 分页、筛选、导出 | `GET /admin/order/list` | P0 |
| 订单详情 | `/order/detail/:orderNo` | 订单信息、出行人、操作 | `GET /admin/order/{orderNo}` | P0 |
| 退款管理 | `/order/refund` | 退款申请列表、审核 | `GET /admin/refund/list` | P0 |

**订单列表筛选项：**
- 订单号
- 用户手机号
- 线路名称
- 订单状态
- 下单时间范围
- 出行日期范围

**订单状态流转：**
```
待支付 → 待确认 → 已确认 → 出行中 → 已完成
   ↓        ↓        ↓
 已取消   已取消   退款中 → 已退款
```

---

### 3.5 用户管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 用户列表 | `/user/list` | 分页、筛选、禁用/启用 | `GET /admin/user/list` | P1 |
| 用户详情 | `/user/detail/:id` | 用户信息、订单记录、积分 | `GET /admin/user/{id}` | P1 |
| 会员管理 | `/user/member` | 会员列表、延期 | `GET /admin/member/list` | P1 |

**用户列表筛选项：**
- 昵称/手机号
- 用户类型（普通/会员/领队/推广员）
- 状态（正常/禁用）
- 注册时间范围

---

### 3.6 领队管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 申请审核 | `/leader/applies` | 待审核列表、审核操作 | `GET /admin/leader/applies` | P1 |
| 领队列表 | `/leader/list` | 领队管理、启用/禁用 | `GET /admin/leader/list` | P1 |

---

### 3.7 推广管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 推广员申请 | `/promoter/applies` | 申请列表、审核 | `GET /admin/promoter/applies` | P1 |
| 推广员列表 | `/promoter/list` | 推广员管理 | `GET /admin/promoter/list` | P1 |
| 推广员详情 | `/promoter/detail/:id` | 佣金记录、绑定用户 | `GET /admin/promoter/{id}` | P1 |
| 优惠券模板 | `/coupon/templates` | 模板CRUD | `GET /admin/coupon/templates` | P1 |
| 优惠券发放 | `/coupon/issue` | 批量发放、记录 | `POST /admin/coupon/issue` | P2 |

---

### 3.8 内容管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| Banner管理 | `/content/banner` | 轮播图CRUD、排序 | `GET /admin/banner/list` | P1 |
| 分类管理 | `/content/category` | 分类CRUD、排序 | `GET /admin/category/list` | P1 |

---

### 3.9 系统管理

| 页面 | 路由 | 功能 | 对应API | 优先级 |
|------|------|------|---------|--------|
| 供应商管理 | `/system/supplier` | 供应商CRUD、重置密码 | `GET /admin/supplier/list` | P1 |
| 系统配置 | `/system/config` | 参数配置 | `GET /admin/config/list` | P2 |

---

### 3.10 定制游管理（后端待开发）

| 页面 | 路由 | 功能 | 优先级 |
|------|------|------|--------|
| 需求列表 | `/custom/list` | 定制需求列表 | P1 |
| 需求详情 | `/custom/detail/:id` | 查看详情、跟进处理 | P1 |

---

## 四、页面统计

| 模块 | 页面数 | 优先级 |
|------|--------|--------|
| 基础模块 | 3 | P0 |
| 数据看板 | 1 | P0 |
| 线路管理 | 7 | P0 |
| 订单管理 | 3 | P0 |
| 用户管理 | 3 | P1 |
| 领队管理 | 2 | P1 |
| 推广管理 | 5 | P1 |
| 内容管理 | 2 | P1 |
| 系统管理 | 2 | P1-P2 |
| 定制游管理 | 2 | P1 |
| **合计** | **30** | - |

---

## 五、公共组件

### 5.1 布局组件
| 组件 | 说明 |
|------|------|
| `AppLayout` | 整体布局框架 |
| `Sidebar` | 侧边栏菜单 |
| `Navbar` | 顶部导航栏 |
| `Breadcrumb` | 面包屑 |
| `TagsView` | 标签页导航（可选） |

### 5.2 业务组件
| 组件 | 说明 |
|------|------|
| `SearchForm` | 搜索表单封装 |
| `DataTable` | 数据表格封装（分页、排序） |
| `ImageUpload` | 图片上传（单图/多图） |
| `RichEditor` | 富文本编辑器 |
| `StatusTag` | 状态标签 |
| `ConfirmButton` | 确认操作按钮 |
| `PriceCalendar` | 价格日历组件 |
| `UserSelector` | 用户选择器 |

---

## 六、权限控制

### 6.1 角色定义
| 角色 | 说明 | 可见模块 |
|------|------|---------|
| admin | 超级管理员 | 全部 |
| supplier | 供应商 | 线路管理、订单管理（仅自己的） |

### 6.2 路由权限
```typescript
// router/index.ts
const routes = [
  {
    path: '/system',
    meta: { roles: ['admin'] },  // 仅管理员可见
    children: [...]
  },
  {
    path: '/route',
    meta: { roles: ['admin', 'supplier'] },  // 管理员和供应商可见
    children: [...]
  }
]
```

### 6.3 数据权限
- 供应商登录后只能看到自己的线路和订单
- 后端API已做数据隔离

---

## 七、开发计划

### Phase 1：基础框架 ✅ 已完成
- [x] 项目初始化（Vite + Vue3 + TS）
- [x] Element Plus 集成（含图标、中文语言包）
- [x] 布局框架搭建（Layout、Sidebar、Navbar、Breadcrumb）
- [x] 登录页面（表单验证、登录逻辑）
- [x] 路由配置（含导航守卫、权限控制）
- [x] 请求封装（Axios拦截器、统一错误处理）
- [x] Pinia 状态管理（user、app）
- [x] 全局样式配置（SCSS）

**Phase 1 完成的页面（占位/框架）：**
| 页面 | 路由 | 状态 |
|------|------|------|
| 登录页 | `/login` | ✅ 完整功能 |
| 数据看板 | `/dashboard` | ✅ 框架+模拟数据 |
| 线路列表 | `/route/list` | ✅ 框架+模拟数据 |
| 新建/编辑线路 | `/route/create`, `/route/edit/:id` | ✅ 框架 |
| 线路审核 | `/route/audit` | ✅ 框架 |
| 订单列表 | `/order/list` | ✅ 框架+模拟数据 |
| 订单详情 | `/order/detail/:orderNo` | ✅ 框架 |
| 退款管理 | `/order/refund` | ✅ 框架 |
| 用户列表 | `/user/list` | ✅ 框架+模拟数据 |
| 会员管理 | `/user/member` | ✅ 框架 |
| 供应商管理 | `/system/supplier` | ✅ 框架 |
| Banner管理 | `/system/banner` | ✅ 框架 |
| 分类管理 | `/system/category` | ✅ 框架 |
| 404页面 | `/*` | ✅ 完整 |

### Phase 2：核心业务（5天）
- [ ] 数据看板（接入真实API、集成ECharts图表）
- [ ] 线路管理（接入API、图片上传、富文本编辑器）
- [ ] 套餐管理（CRUD）
- [ ] 价格日历（日历组件）
- [ ] 订单管理（接入API、状态流转）
- [ ] 退款处理（接入API）

### Phase 3：用户体系（3天）
- [ ] 用户管理（接入API）
- [ ] 会员管理（接入API）
- [ ] 领队管理

### Phase 4：营销推广（3天）
- [ ] 推广员管理
- [ ] 优惠券管理

### Phase 5：内容与系统（2天）
- [ ] Banner管理（接入API、图片上传）
- [ ] 分类管理（接入API）
- [ ] 供应商管理（接入API）
- [ ] 系统配置

### Phase 6：定制游（2天）
- [ ] 定制需求管理

**总计预估：17 人天**（Phase 1 已完成）

---

## 八、API对接说明

### 8.1 基础配置
```typescript
// .env.development
VITE_API_BASE_URL=http://localhost:8081

// .env.production
VITE_API_BASE_URL=https://admin-api.xunjiqianxing.com
```

### 8.2 请求封装
```typescript
// utils/request.ts
import axios from 'axios'

const service = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000
})

// 请求拦截 - 添加token
service.interceptors.request.use(config => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers['Authorization'] = token
  }
  return config
})

// 响应拦截 - 统一错误处理
service.interceptors.response.use(
  response => {
    const { code, message, data } = response.data
    if (code === 200) {
      return data
    } else if (code === 401) {
      // 登录过期，跳转登录
      router.push('/login')
      return Promise.reject(message)
    } else {
      ElMessage.error(message)
      return Promise.reject(message)
    }
  },
  error => {
    ElMessage.error('网络异常')
    return Promise.reject(error)
  }
)
```

---

## 九、相关文档

- [后端API文档](http://localhost:8081/doc.html)
- [后端开发清单](./管理后台开发工作清单.md)
- [小程序前端设计文档](./小程序前端设计文档.md)

---

## 十、启动说明

### 10.1 开发环境
```bash
cd xj-admin-web
npm install
npm run dev
```
访问 http://localhost:5173

### 10.2 生产构建
```bash
npm run build
```
构建产物在 `dist/` 目录

### 10.3 依赖说明
| 依赖 | 版本 | 说明 |
|------|------|------|
| vue | ^3.5 | 核心框架 |
| vue-router | ^4 | 路由 |
| pinia | ^3 | 状态管理 |
| element-plus | ^2.9 | UI组件库 |
| @element-plus/icons-vue | ^2 | 图标库 |
| axios | ^1.7 | HTTP客户端 |
| nprogress | ^0.2 | 进度条 |
| sass | - | 样式预处理 |

---

## 版本记录

| 版本 | 日期 | 更新内容 |
|-----|------|---------|
| V1.0 | 2026-01-26 | 初始版本 |
| V1.1 | 2026-01-26 | Phase 1 基础框架完成 |
