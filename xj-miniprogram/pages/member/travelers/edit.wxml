<view class="page-traveler-edit">
  <!-- 加载中 -->
  <view class="loading-container" wx:if="{{loading}}">
    <xj-loading text="加载中..." vertical />
  </view>

  <!-- 表单 -->
  <view class="form-container" wx:if="{{!loading}}">
    <!-- 姓名 -->
    <view class="form-section">
      <view class="form-item">
        <view class="form-label required">姓名</view>
        <input
          class="form-input"
          value="{{form.name}}"
          placeholder="请输入真实姓名"
          data-field="name"
          bindinput="handleInput"
        />
      </view>
    </view>

    <!-- 证件信息 -->
    <view class="form-section">
      <view class="form-item">
        <view class="form-label required">证件类型</view>
        <picker
          class="form-picker"
          mode="selector"
          range="{{idTypeOptions}}"
          range-key="label"
          value="{{idTypeIndex}}"
          bindchange="handleIdTypeChange"
        >
          <view class="picker-value">
            <text>{{idTypeOptions[idTypeIndex].label}}</text>
            <text class="picker-arrow">›</text>
          </view>
        </picker>
      </view>

      <view class="form-item">
        <view class="form-label required">证件号码</view>
        <input
          class="form-input"
          value="{{form.idNo}}"
          placeholder="请输入证件号码"
          data-field="idNo"
          bindinput="handleInput"
        />
      </view>
    </view>

    <!-- 联系方式 -->
    <view class="form-section">
      <view class="form-item">
        <view class="form-label required">手机号</view>
        <input
          class="form-input"
          type="number"
          maxlength="11"
          value="{{form.phone}}"
          placeholder="请输入手机号"
          data-field="phone"
          bindinput="handleInput"
        />
      </view>
    </view>

    <!-- 设为默认 -->
    <view class="form-section">
      <view class="form-item form-item--switch">
        <view class="form-label">设为默认出行人</view>
        <switch
          class="form-switch"
          checked="{{form.isDefault}}"
          color="#1890FF"
          bindchange="handleDefaultChange"
        />
      </view>
      <view class="form-hint">设为默认后，下单时将自动填充此出行人信息</view>
    </view>

    <!-- 提示 -->
    <view class="tips-section">
      <view class="tips-title">温馨提示</view>
      <view class="tips-content">
        <view class="tips-item">1. 请填写真实有效的身份信息，用于出行验证</view>
        <view class="tips-item">2. 证件信息需与出行时携带的证件一致</view>
        <view class="tips-item">3. 儿童也需要填写证件信息</view>
      </view>
    </view>
  </view>

  <!-- 底部保存按钮 -->
  <view class="save-bar" wx:if="{{!loading}}">
    <view class="save-btn {{submitting ? 'save-btn--disabled' : ''}}" bindtap="handleSubmit">
      <text>{{submitting ? '保存中...' : '保存'}}</text>
    </view>
  </view>
</view>
