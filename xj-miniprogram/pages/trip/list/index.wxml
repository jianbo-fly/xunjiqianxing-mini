<!--
  行程列表页
  区块：待出行 + 为你推荐
-->
<view class="page-trip">
  <!-- 加载中 -->
  <view class="loading-container" wx:if="{{loading}}">
    <xj-loading text="加载中..." vertical />
  </view>

  <block wx:else>
    <!-- 待出行区块 -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">我的行程</text>
        <view class="section-more" bindtap="handleViewAllTrips" wx:if="{{tripList.length > 0}}">
          <text>查看全部</text>
          <image class="section-more__icon" src="/assets/icons/common/arrow-right.png" mode="aspectFit" />
        </view>
      </view>

      <!-- 待出行为空 -->
      <xj-empty wx:if="{{tripEmpty}}" type="order" description="暂无待出行的行程">
        <view class="empty-btn" bindtap="handleExplore">去逛逛</view>
      </xj-empty>

      <!-- 待出行列表 -->
      <view class="trip-list" wx:else>
        <view
          class="trip-card"
          wx:for="{{tripList}}"
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="handleTripTap"
        >
          <view class="trip-card__left {{item.countdown < 0 ? 'is-ongoing' : ''}}">
            <view class="trip-card__date">{{item.startDateText}}</view>
            <view class="trip-card__countdown">{{item.countdownText}}</view>
          </view>
          <view class="trip-card__right">
            <view class="trip-card__name">{{item.productName}}</view>
            <view class="trip-card__meta">
              <text>{{item.skuName}}</text>
              <text class="trip-card__dot">·</text>
              <text>{{item.peopleText}}</text>
            </view>
          </view>
          <view class="trip-card__action">
            <image class="trip-card__arrow" src="/assets/icons/common/arrow-right.png" mode="aspectFit" />
          </view>
        </view>
      </view>
    </view>

    <!-- 为你推荐区块 -->
    <view class="section" wx:if="{{recommendList.length > 0}}">
      <view class="section-header">
        <text class="section-title">为你推荐</text>
      </view>

      <view class="recommend-grid">
        <route-card
          wx:for="{{recommendList}}"
          wx:key="id"
          route="{{item}}"
          mode="compact"
          showFavorite="{{false}}"
          bind:tap="handleRouteTap"
        />
      </view>
    </view>
  </block>
</view>
